<!doctype html>
<html lang="fr" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Introduction à Terraform avec Proxmox | MrVyM.dev</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://blog.marticou.com/posts/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://blog.marticou.com/posts/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://blog.marticou.com/posts/blog/intro-terraform-proxmox"><meta data-rh="true" property="og:locale" content="fr"><meta data-rh="true" name="docusaurus_locale" content="fr"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="fr"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Introduction à Terraform avec Proxmox | MrVyM.dev"><meta data-rh="true" name="description" content="Le but de Terraform est de déployer une infrastructure ou une entité de manière idempotente. Cela signifie que l’on doit pouvoir relancer le script 100 fois et obtenir le même résultat à chaque exécution."><meta data-rh="true" property="og:description" content="Le but de Terraform est de déployer une infrastructure ou une entité de manière idempotente. Cela signifie que l’on doit pouvoir relancer le script 100 fois et obtenir le même résultat à chaque exécution."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-12-02T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="terraform,proxmox,devops,hcl,BPG"><link data-rh="true" rel="icon" href="/posts/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://blog.marticou.com/posts/blog/intro-terraform-proxmox"><link data-rh="true" rel="alternate" href="https://blog.marticou.com/posts/blog/intro-terraform-proxmox" hreflang="fr"><link data-rh="true" rel="alternate" href="https://blog.marticou.com/posts/blog/intro-terraform-proxmox" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://blog.marticou.com/posts/blog/intro-terraform-proxmox","mainEntityOfPage":"https://blog.marticou.com/posts/blog/intro-terraform-proxmox","url":"https://blog.marticou.com/posts/blog/intro-terraform-proxmox","headline":"Introduction à Terraform avec Proxmox","name":"Introduction à Terraform avec Proxmox","description":"Le but de Terraform est de déployer une infrastructure ou une entité de manière idempotente. Cela signifie que l’on doit pouvoir relancer le script 100 fois et obtenir le même résultat à chaque exécution.","datePublished":"2024-12-02T00:00:00.000Z","author":[],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://blog.marticou.com/posts/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/posts/blog/rss.xml" title="MrVyM.dev RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/blog/atom.xml" title="MrVyM.dev Atom Feed">
<link rel="alternate" type="application/json" href="/posts/blog/feed.json" title="MrVyM.dev JSON Feed"><link rel="stylesheet" href="/posts/assets/css/styles.3019083f.css">
<script src="/posts/assets/js/runtime~main.1d8f061f.js" defer="defer"></script>
<script src="/posts/assets/js/main.3dfb2aab.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/posts/img/logo.svg"><div role="region" aria-label="Aller au contenu principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Aller au contenu principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Ouvrir/fermer la barre de navigation" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/posts/"><div class="navbar__logo"><img src="/posts/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/posts/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">blog.mrvym.dev</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/posts/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mrvym/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-label="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Navigation article de blog récent"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/posts/blog/petit-segfault">Le plus petit segfault</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/posts/blog/tester-cest-tricher">Tester c&#x27;est tricher, compiler c&#x27;est douter</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/posts/blog/intro-terraform-proxmox">Introduction à Terraform avec Proxmox</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/posts/blog/sas-or-not-sas">Disque dur : SAS, SATA, SCSI ou IDE ?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/posts/blog/define-inc-a">#define INC(a) INC(a+1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/posts/blog/plot-chart-docusaurus-mdx">How to code plot and chart in Docusaurus with MDX</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/posts/blog/merveilleux-monde-de-make">Le Merveilleux Monde de Make</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">1970</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/posts/blog/2030/01/01/TODO">IDEA / TODO / SUBJECT</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Introduction à Terraform avec Proxmox</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-12-02T00:00:00.000Z">2 décembre 2024</time> · <!-- -->4 minutes de lecture</div></header><div id="__blog-post-container" class="markdown"><p>Le but de Terraform est de déployer une infrastructure ou une entité de manière <strong>idempotente</strong>. Cela signifie que l’on doit pouvoir relancer le script 100 fois et obtenir le même résultat à chaque exécution.<br>
<!-- -->Pour cela, nous utilisons un <strong>provider</strong>, qui est essentiellement une bibliothèque permettant de se connecter à notre serveur.</p>
<p>Dans ce cas pratique, nous allons utiliser <strong>Proxmox</strong> et <strong>BPG</strong>. Il existe deux principaux providers pour Proxmox :</p>
<ul>
<li>
<p><strong><a href="https://registry.terraform.io/providers/Telmate/proxmox/latest/docs" target="_blank" rel="noopener noreferrer">Telmate</a></strong><br>
<!-- -->C’est une bibliothèque qui permet de déployer très simplement des VMs et des LXCs.<br>
<!-- -->Inconvénient : elle n’implémente pas de fonctionnalités avancées. Cependant, elle est fréquemment mise à jour.</p>
</li>
<li>
<p><strong><a href="https://registry.terraform.io/providers/bpg/proxmox/latest/docs" target="_blank" rel="noopener noreferrer">Bpg</a></strong><br>
<!-- -->Cette bibliothèque est légèrement plus complexe à prendre en main, mais elle est bien plus puissante.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="organisation-et-structure-dun-projet-terraform">Organisation et Structure d&#x27;un Projet Terraform<a href="#organisation-et-structure-dun-projet-terraform" class="hash-link" aria-label="Lien direct vers Organisation et Structure d&#x27;un Projet Terraform" title="Lien direct vers Organisation et Structure d&#x27;un Projet Terraform">​</a></h2>
<p>Afin que vous puissiez mieux comprendre le projet, voici son architecture :</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── main.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── provider.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── variable.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── terraform.auto.tfvars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Vous pouvez ajouter ou segmenter le projet en autant de fichiers <code>.tf</code> que nécessaire. Par exemple, nous aurions pu avoir un fichier pour les VMs et un autre pour les LXCs.</p>
<ul>
<li>Les fichiers se terminant par <code>.tfvars</code> servent à définir des variables. Lorsqu’ils commencent par <code>auto</code>, ils sont automatiquement chargés par Terraform.</li>
<li>Le fichier <code>variable.tf</code> permet de créer des variables sans les instancier.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="petit-point-vocabulaire">Petit point Vocabulaire<a href="#petit-point-vocabulaire" class="hash-link" aria-label="Lien direct vers Petit point Vocabulaire" title="Lien direct vers Petit point Vocabulaire">​</a></h3>
<p>Dans cette article, nous allons utiliser le terme de LXC et de VM. Je vais faire un petit point dessus.</p>
<ul>
<li>
<p><strong><code>LXC</code></strong> ou <strong><code>LinuX Container</code></strong> : ce sont des environnements virtualisés qui tourne sur le <code>kernel</code> de l&#x27;hôte mais qui ne peuvent pas discuter ensemble. Cela permet de segmenter nos services sans trop perde en performance.</p>
</li>
<li>
<p><strong><code>VM</code></strong> ou <strong><code>Virtual Machine</code></strong> : comme son nom l&#x27;indique, on simule l&#x27;intégralité d&#x27;une machine. On perd en performance mais on gagne en sécurité et en fonctionnalité car un LXC n&#x27;a pas tout les privilèges.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="choisir-et-configurer-un-provider-proxmox">Choisir et Configurer un Provider Proxmox<a href="#choisir-et-configurer-un-provider-proxmox" class="hash-link" aria-label="Lien direct vers Choisir et Configurer un Provider Proxmox" title="Lien direct vers Choisir et Configurer un Provider Proxmox">​</a></h2>
<p>Avant tout, nous devons installer le <strong>provider</strong> (la bibliothèque). Bien entendu, nous fixons une version minimale :</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required_providers {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxmox = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      source  = &quot;bpg/proxmox&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      version = &quot;&gt;= 0.3.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required_version = &quot;&gt;= 0.14&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Une fois la bibliothèque ajoutée, nous déclarons un provider nommé &quot;proxmox&quot;, en fournissant les informations nécessaires :</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">provider &quot;proxmox&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  endpoint = &quot;https://${var.proxmox_endpoint}:8006&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  api_token = var.api_token_secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  insecure = true # car un certificat TLS auto-signé est utilisé</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ssh {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    agent = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    username = terraform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="les-variables-dans-terraform">Les Variables dans Terraform<a href="#les-variables-dans-terraform" class="hash-link" aria-label="Lien direct vers Les Variables dans Terraform" title="Lien direct vers Les Variables dans Terraform">​</a></h2>
<p>Si vous êtes attentif, vous avez remarqué que nous utilisons l’objet <code>var.api_token_secret</code> dans le bloc du provider. Cette chaîne de caractères est définie dans le fichier <code>terraform.auto.tfvars</code>.</p>
<p>À la manière d’un fichier <code>.env</code>, ce fichier contient des valeurs sensibles et <strong>ne doit pas être poussé sur le dépôt git</strong> :</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># terraform.auto.tfvars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">api_token_secret = &quot;terraform-prov@pve!terraform=TOKEN&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans le fichier <code>variable.tf</code>, nous définissons les variables et leur type.<br>
<!-- -->Voici les principaux types disponibles :</p>
<ul>
<li><strong>number</strong></li>
<li><strong>string</strong></li>
<li><strong>list()</strong> (ex. : <code>list(string)</code>)</li>
<li><strong>object</strong></li>
<li><strong>map</strong></li>
</ul>
<p>Exemple :</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># variable.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;api_token_secret&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Secret token to connect Proxmox API&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;proxmox_endpoint&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;The domain name of the Proxmox instance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = &quot;proxmox.mysite.fr&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="les-images-et-les-templates">Les Images et les Templates<a href="#les-images-et-les-templates" class="hash-link" aria-label="Lien direct vers Les Images et les Templates" title="Lien direct vers Les Images et les Templates">​</a></h2>
<p>Pour démarrer nos entités, nous devons leur fournir un système d’exploitation.<br>
<!-- -->Nous téléchargeons automatiquement un fichier de template pour le LXC et un ISO avec <strong>cloud-init</strong> pour la VM.</p>
<blockquote>
<p>Si vous ne connaissez pas <strong>cloud-init</strong>, c’est une méthode permettant d’instancier des machines sans passer par l’installateur de l’OS.</p>
</blockquote>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;proxmox_virtual_environment_download_file&quot; &quot;ubuntu_22-04_lxc&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  content_type = &quot;vztmpl&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  datastore_id = &quot;local&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  node_name    = var.target_node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  url          = &quot;http://download.proxmox.com/images/system/ubuntu-22.04-standard_22.04-1_amd64.tar.zst&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;proxmox_virtual_environment_download_file&quot; &quot;ubuntu_22-04_img&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  content_type = &quot;iso&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  datastore_id = &quot;local&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  node_name    = var.target_node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  url          = &quot;https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64.img&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="on-crée-un-réseau-virtuel">On crée un Réseau Virtuel<a href="#on-crée-un-réseau-virtuel" class="hash-link" aria-label="Lien direct vers On crée un Réseau Virtuel" title="Lien direct vers On crée un Réseau Virtuel">​</a></h2>
<p>Si nous avons envie que nos ressources discutent entre elles, il nous faut un réseau.</p>
<p>Pour créer un adaptateur virtuel, il suffit d’appeler la ressource <code>proxmox_virtual_environment_network_linux_bridge</code> et de lui donner un nom :</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;proxmox_virtual_environment_network_linux_bridge&quot; &quot;internal_network&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  node_name = var.target_node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name      = &quot;vmbr5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  comment   = &quot;Internal Network&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="votre-premier-container">Votre premier Container<a href="#votre-premier-container" class="hash-link" aria-label="Lien direct vers Votre premier Container" title="Lien direct vers Votre premier Container">​</a></h2>
<p>Passons aux choses concrètes en instanciant un <strong>LXC</strong>. Pour cela, nous créons une ressource <code>proxmox_virtual_environment_container</code>.</p>
<p>Avec l’IaC, tout peut être configuré : le disque, la RAM, le serveur DNS, etc.</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;proxmox_virtual_environment_container&quot; &quot;first_lxc&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description   = &quot;Managed by Terraform - Mr.VyM&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  node_name     = var.target_node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start_on_boot = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  started       = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vm_id = 101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cpu {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    architecture = &quot;amd64&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cores        = var.core_nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  disk {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    datastore_id = &quot;storage&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size         = var.disk_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dedicated = var.memory_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    swap      = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  operating_system {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template_file_id = proxmox_virtual_environment_download_file.ubuntu_22-04_lxc.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type             = &quot;ubuntu&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  initialization {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hostname = &quot;mycontainer&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dns {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      servers = [&quot;1.1.1.1&quot;, &quot;1.0.0.1&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ip_config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ipv4 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address = &quot;192.168.10.2/24&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gateway = &quot;192.168.10.1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user_account {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      keys     = [&quot;keys 1&quot;, &quot;keys 2&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      password = var.lxc_password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  network_interface {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bridge = proxmox_virtual_environment_network_linux_bridge.internal_network.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name   = &quot;eth0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="et-maintenant-une-vm">Et maintenant une VM<a href="#et-maintenant-une-vm" class="hash-link" aria-label="Lien direct vers Et maintenant une VM" title="Lien direct vers Et maintenant une VM">​</a></h2>
<p>Créer une VM suit le même pattern que pour un LXC, avec quelques différences :</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;proxmox_virtual_environment_vm&quot; &quot;vm_template&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Managed by Terraform - Mr.VyM&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  node_name   = var.target_node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name        = &quot;MyDummyVM&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vm_id       = 102</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cpu {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cores = var.core_nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type  = &quot;x86-64-v2-AES&quot;  # recommandé pour les CPU modernes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dedicated = var.memory_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    floating  = var.memory_size # active le ballooning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  disk {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    datastore_id = &quot;local&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    file_id      = proxmox_virtual_environment_download_file.ubuntu_22-04_img.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    interface    = &quot;scsi0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size         = var.disk_size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  initialization {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ip_config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ipv4 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address = &quot;${var.base_subnet}.3/24&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gateway = &quot;${var.base_subnet}.1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user_account {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      keys     = [&quot;keys 1&quot;, &quot;keys 2&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      password = var.vm_password </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      username = &quot;mrvym&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    datastore_id = &quot;local&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  network_device {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bridge = proxmox_virtual_environment_network_linux_bridge.internal_network.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  operating_system {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type = &quot;l26&quot; # Linux Kernel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="on-check-et-ca-part-en-prod">On check et ca part en Prod<a href="#on-check-et-ca-part-en-prod" class="hash-link" aria-label="Lien direct vers On check et ca part en Prod" title="Lien direct vers On check et ca part en Prod">​</a></h2>
<p>Enfin, nous déployons le tout avec les commandes suivantes :</p>
<ul>
<li>
<p><strong><code>terraform init</code></strong><br>
<!-- -->Initialise Terraform, télécharge les providers et crée les fichiers <code>terraform.state</code> et <code>terraform.lock</code>. Ces fichiers stockent l’état des entités sur le serveur.<br>
<!-- -->Si ces fichiers sont absents, Terraform recrée les ressources, ce qui pourrait entraîner leur suppression et recréation.</p>
</li>
<li>
<p><strong><code>terraform fmt</code></strong><br>
<!-- -->Formate le code pour garantir sa propreté.</p>
</li>
<li>
<p><strong><code>terraform plan</code></strong><br>
<!-- -->Vérifie les actions que Terraform s’apprête à exécuter.</p>
</li>
<li>
<p><strong><code>terraform apply</code></strong><br>
<!-- -->Applique les modifications.</p>
</li>
</ul>
<blockquote>
<p>Ecrit pour l&#x27;<strong><code>Avent of Tech</code></strong> de la <a href="https://dev.to/ject" target="_blank" rel="noopener noreferrer">JECT</a></p>
</blockquote></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags :</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/posts/blog/tags/terraform">terraform</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/posts/blog/tags/proxmox">proxmox</a></li><li class="tag_QGVx"><a title="DevOps - Tools" class="tag_zVej tagRegular_sFm0" href="/posts/blog/tags/devops">devops</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/posts/blog/tags/hcl">hcl</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/posts/blog/tags/bpg">BPG</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://blog.marticou.com/posts/blog/blog/2024-12-02-intro-terraform-proxmox.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Éditer cette page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Pagination des articles du blog"><a class="pagination-nav__link pagination-nav__link--prev" href="/posts/blog/tester-cest-tricher"><div class="pagination-nav__sublabel">Article plus récent</div><div class="pagination-nav__label">Tester c&#x27;est tricher, compiler c&#x27;est douter</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/posts/blog/sas-or-not-sas"><div class="pagination-nav__sublabel">Article plus ancien</div><div class="pagination-nav__label">Disque dur : SAS, SATA, SCSI ou IDE ?</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#organisation-et-structure-dun-projet-terraform" class="table-of-contents__link toc-highlight">Organisation et Structure d&#39;un Projet Terraform</a><ul><li><a href="#petit-point-vocabulaire" class="table-of-contents__link toc-highlight">Petit point Vocabulaire</a></li></ul></li><li><a href="#choisir-et-configurer-un-provider-proxmox" class="table-of-contents__link toc-highlight">Choisir et Configurer un Provider Proxmox</a></li><li><a href="#les-variables-dans-terraform" class="table-of-contents__link toc-highlight">Les Variables dans Terraform</a></li><li><a href="#les-images-et-les-templates" class="table-of-contents__link toc-highlight">Les Images et les Templates</a></li><li><a href="#on-crée-un-réseau-virtuel" class="table-of-contents__link toc-highlight">On crée un Réseau Virtuel</a></li><li><a href="#votre-premier-container" class="table-of-contents__link toc-highlight">Votre premier Container</a></li><li><a href="#et-maintenant-une-vm" class="table-of-contents__link toc-highlight">Et maintenant une VM</a></li><li><a href="#on-check-et-ca-part-en-prod" class="table-of-contents__link toc-highlight">On check et ca part en Prod</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/posts/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 blog.mrvym.dev, Inc. Thanks to Docusaurus.</div></div></div></footer></div>
</body>
</html>